<!DOCTYPE html>
<html lang="en">
<head>
  <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>RallySecurityPodcast - Pentesting Part 2</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta name="description" content="RallySecurity is a weekly information security podcast that discusses news and breaches from both red and blue perspectives. We stream live on Twitch.
">
  <meta name="author" content="Ben Heise">

  <link rel="alternate" type="application/atom+xml" href="https://rallysecurity.com/general_feed.xml" title="General Site Atom Feed (No Podcast Metadata!)" />
  <link rel="alternate" type="application/rss+xml" title="mp3 Episode RSS-Feed" href="https://rallysecurity.com/episodes.mp3.rss" />
<link rel="alternate" type="application/rss+xml" title="m4a Episode RSS-Feed" href="https://rallysecurity.com/episodes.m4a.rss" />
<link rel="alternate" type="application/rss+xml" title="ogg Episode RSS-Feed" href="https://rallysecurity.com/episodes.ogg.rss" />

  <link href='/assets/css/ubuntu.css' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="https://rallysecurity.com/assets/css/main.css">

  <script type='text/javascript' src="https://rallysecurity.com/assets/js/jquery.min.js"></script>
  <script type='text/javascript' src="https://rallysecurity.com/assets/js/bootstrap.min.js"></script>
  <script type='text/javascript' src="https://rallysecurity.com/assets/js/icheck.min.js"></script>
  <script type='text/javascript' src="https://rallysecurity.com/assets/js/jquery.fs.selecter.min.js"></script>
  <script type='text/javascript' src="https://rallysecurity.com/assets/js/jquery.fs.stepper.min.js"></script>
  <script type='text/javascript' src="https://rallysecurity.com/assets/js/custom.js"></script>

  <meta name="twitter:card" content="player" />
  <meta name="twitter:site" content="@rallysecurity" />
  <meta name="twitter:title" content="Pentesting Part 2" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:image" content="https://rallysecurity.com/img/logo-itunes.jpg" />
  <meta name="twitter:player" content="https://rallysecurity.com/players/Pentesting-102" />
  <meta name="twitter:player:width" content="480" />
  <meta name="twitter:player:height" content="480" />
  <meta name="twitter:player:stream" content="https://rallysecurity.com/episodes/" />
  <meta name="twitter:player:stream:content_type" content="" />


  
  
</head>

<body>
  <div class="container-fluid">
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://rallysecurity.com">RallySecurityPodcast</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a  class="active" href="https://rallysecurity.com/">Main</a></li>
<li><a  href="https://rallysecurity.com/about/">About</a></li>
<li><a  href="https://rallysecurity.com/blog/">Blog</a></li>
<li><a  href="https://rallysecurity.com/previousepisodes/">Previous Episodes</a></li>
<li><a  href="https://rallysecurity.com/support/">Support Us</a></li>
          </ul>
          <form class="navbar-form navbar-right" action="https://google.com/search" method="get" role="search">
            <div class="form-group">
              <input type="text" name="q" class="form-control" placeholder="search item" value="">
              <input type="hidden" name="q" value="site:rallysecurity.com" />
            </div>
            <button type="submit" class="btn btn-default">Search</button>
          </form>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
      <div class="row ">
        <div class="col-sm-8">
          <div class="content">
            
  
    <section id="eb35cbda">
  <div class="page-header">
  <h1>
    <a class='episode_title' href='https://rallysecurity.com/2019/06/17/Our-Podcasting-Gear.html#eb35cbda'>Our Podcasting Gear</a>
    <small class='episode_date'>
      
        2019-06-17 00:00:00 -0400
      
    </small> <br />
    <small></small>
  </h1>
</div>

</section>

  

  
    <section id="1c039b56">
  <div class="page-header">
  <h1>
    <a class='episode_title' href='https://rallysecurity.com/2019/06/06/episode1-100.html#1c039b56'>Season 1 Episodes 1-100</a>
    <small class='episode_date'>
      
        2019-06-06 00:00:00 -0400
      
    </small> <br />
    <small></small>
  </h1>
</div>

</section>

  

  
    <section id="3f487b7a">
  <div class="page-header">
  <h1>
    <a class='episode_title' href='https://rallysecurity.com/2016/08/19/Cat-and-mouse-the-effects-of-threat-research-on-nation-state-actors.html#3f487b7a'>Cat and Mouse- The Effects of Threat Research on Nation-State Actors</a>
    <small class='episode_date'>
      
        2016-08-19 00:00:00 -0400
      
    </small> <br />
    <small></small>
  </h1>
</div>

</section>

  

  
    
<section id="e97a9de8" class="active">
  <div class="page-header">
  <h1>
    <a class='episode_title' href='https://rallysecurity.com/2016/08/18/Pentesting-102.html#e97a9de8'>Pentesting Part 2</a>
    <small class='episode_date'>
      
        2016-08-18 00:00:00 -0400
      
    </small> <br />
    <small></small>
  </h1>
</div>


  <p>Hello again!</p>

<p>I promised that I would continue this series of 101-level posts on penetration testing/red-teaming so… here I am. And we’re as done as a half-eaten sandwich. If you want to brush up, the first blog post in this series can be found <a href="https://www.rallysecurity.com/">here</a>.</p>

<p>Today’s lesson will be on the general phases of a penetration test, as well as covering the Pre-Engagement and Reconnaissance (aka “recon”) phases. Some people and organizations will call different parts of a pentest engagement by different names, and/or lump different phases together. Here’s my interpretation:</p>

<h3 id="pre-engagment-edited-819-per-conversation-with-my-betters">Pre-Engagment [edited 8/19, per conversation with my betters]</h3>
<ul>
  <li>Reconnaissance</li>
  <li>Initial Access</li>
  <li>Persistence</li>
  <li>Lateral Movement/Privilege Escalation</li>
  <li>Achieving Goals</li>
  <li>Post Engagement Write-up and Reporting</li>
</ul>

<p>Lets compare the phases I have laid out to another interpretation. Like, say, the <a href="http://www.pentest-standard.org/index.php/Main_Page">Penetration Testing Execution Standard (PTES)</a>. They have their own belief on what the phases look like:</p>

<ul>
  <li>Pre-Engagement Interactions</li>
  <li>Intelligence Gathering</li>
  <li>Threat Modeling</li>
  <li>Vulnerability Analysis</li>
  <li>Exploitation</li>
  <li>Post Exploitation</li>
  <li>Reporting</li>
</ul>

<p>With regards to intelligence gathering, threat modeling, and vulnerability analysis, I feel like good pentesters do all of that as a part of the recon phase. The sole reason you’re gathering information is figure out how you’re going to breach their defenses and/or determine if there are other findings that, while they may not be exploitable, may be worth noting in your report since they represent some sort of a risk. Which is why recon is the most important phase of any pentest, and this will NOT be the last time I say this. The only reason I could see to have these broken out into separate steps, would be to break recon into more manageable portions to iterate just HOW IMPORTANT RECON IS »foot stomp«.</p>

<p>On the other hand, I take the exploitation/post exploitation phases and break it into initial access, persistence, lateral movement, and achieving goals. I feel its important to separate these steps out as they are all important portions of the exploitation/post-exploitation phase of a penetration test that all kinda get lumped together. I guess I’m a bit of a contradictory like that.</p>

<h3 id="phase-0-pre-engagement-edited-819">Phase 0: Pre-Engagement [Edited 8/19]</h3>

<p>So originally, I had a blurb in here in how I kind of consider it crap that pre-engagement things are included as pentester responsibilities in the PTES. “In any normal scenario, this should be handled primarily by a sales rep/sales engineer, and/or a project manager to handle the hairy logistics and things that need to be negotiated before a penetration test.”</p>

<p>What are said, hairy things? little details like… agreeing on services to perform, rules of engagement, billing, scope, ip ranges, third party equipment/vendor (e.g. MSSPs) equipment that may or may not be in scope, ensuring that authorization forms of SOME sort are signed by an authoritative entity in the client organization (e.g. the “Get out of jail free card”), and finally organizing everything into a conherent contract that is the rational, reasonable solution that makes sense to the pentester as well as serves the clients needs (among other things).</p>

<p>On paper, this is what /should/ be done, but in reality… salespeople exist to make sales. While technically, I still think that pre-engagement should NOT be an activity that the penetration tester has any sort of primary responsibility over (in a perfect world), the fact of the matter is… if you aren’t present, the salespeople will do whatever they can and whatever the customer wants (including increasing the scope to a massive degree and/or sell things that cannot be delivered or make NO SENSE whatsoever) in order to make that sale, get that engagement, and get another client in the books. THEN, it will be YOUR job, as the pentester to deliver. It is in your own best interest to be present during these meetings to make sure you can answer the client’s questions (shows good customer support, especially if you practice good soft skills – which you need for social engineering anyway… more on that later), and ensure that salespeople or clients aren’t pulling anything stupid during contract negotiations.</p>

<p>I mean, it makes sense and I can’t believe I was actually against including it initially. I worked at a company that sold network security appliances that operated like this. Sales would promise them the world to get them to buy the security appliance, then deliver grains of sand. When the customers were dazed, confused, had no idea how to manage the systems and/or configure them.. Sales would point them towards technical support and we would be stuck fielding deployment issues for a customer who has no idea what they were doing, only that they were promised it performs X function(s)</p>

<p>The bottom line here is to be present for these meetings and ensure that terms make sense to both the client you are servicing, as well as you, the pentester who are going to be performing the work detailed in the contract. If you happen to be an independent pentester, then god help you, because you get to write up the statement of work for the engagement, ensure that it makes sense, ensure that the scope isn’t creeping out of control (that is, the client doesn’t keep piling things in), that billing is rational, and that the work actually gets performed. Keep an eye on the statement of work.</p>

<p>** (special thanks to @viss and @redteamwrangler) **</p>

<h3 id="phase-1-reconnaissance">Phase 1: Reconnaissance</h3>
<p>If you don’t have good recon, you just end up throwing attacks at something hoping to slip between the cracks.</p>

<p>Recon is important. Recon is important. Recon is important. I like turtles. Oh, and RECON IS IMPORTANT. Good recon can make or break an engagement. Your goal in recon is to recover as much information about the organization, its employees, business processes, technologies deployed, and/or security controls in place (physical and/or technical — depending on scope) as possible. Afterwards, you are responsible for analyzing this information and making inferences based on it in order to identify potential weaknesses that can be exploited in order for you to gain initial access. Additionally, as mentioned above, you have the responsibility of noting other potential issues as well. These issues might not net you a shell, or get you access to a juicy information dump but may possible represent some sort of risk that the client needs to be aware of.  Food for thought.</p>

<p>For instance, if breaching physical security is considered in scope for the engagement, then sizing up the building, performing surveillance, RF spectrum analysis, wireless site survey, inspection of physical security controls, among other activities may be things you consider doing depending on time you have available. This may, for instance, lead to you identifying a rogue access point with no encryption or poor encryption capabilities (e.g. WEP) that could be abused to gain initial access to the client’s network. Or perhaps discovering that tailgating (the practice of allowing unauthorized individuals into secure spaces who are not authorized to be there) may be a common practice, allowing you to walk right into the building, set up to a conference room or wiring closet, and literally plug into the client’s network directly. You’d think such occurrences are infeasible, but… I’ve seen and heard of them happening.</p>

<p>Generally speaking, recon falls into two categories: active and passive recon. Passive recon involves making use of information about your target made publicly available from a variety of different resources. If you know intelligence community and/or natsec (national security) nerds, you might know passive recon by its other name: OSINT (Open-Source Intelligence). Essentially, any information that you can derive from freely available sources that does not involve you directly asking the questions yourself, or probing your client’s network infrastructure directly is considered passive recon/OSINT. Think of it as a giant game of “IM NOT TOUCHING YOOUUUUU”.</p>

<p>What are some examples of passive recon/OSINT resources? I did a talk related to this:</p>

<p>If videos aren’t your thing, the slide deck and a huge collection of web browser bookmarks to a ton of other resources can be found <a href="http://blindseeker.com/ccc">here</a> (and as a backup, <a href="https://github.com/da667/CircleCity">here</a>). So for the most part, the resources I collected are mainly associated with blue-team or security operations and resources to help make their lives easier. However, there are choice data sources in there that penetration testers can use as well, such as shodan, censys, punkspider (Currently unavailable due to SSL issues), Hurricane Electric, ipintel, netcraft, and robtex.</p>

<p>Those are just for starters. You could use google street view to determine building layout, Wigle for gathering information about nearby wi-fi access points, various job posting boards to learning about technologies deployed in the company, social media (facebook, twitter, etc. — especially including linkedin) to find out more about the client’s employees and technologies, the SEC’s <a href="https://www.sec.gov/cgi-bin/browse-edgar?company=cisco&amp;owner=exclude&amp;action=getcompany">EDGAR database</a> (if the company is publicly traded) to figure out who is at the director/board level (for social engineering, etc.), company websites and press releases surrounding new facilities, organization charts, new employees, new projects, preferred vendors, mergers and acquisitions and so. much. more. You can find mountains of information about different organizations, and most the time, you never have to send a single packet towards their infrastructure. That is the beauty of passive recon and OSINT: that data is out there and ripe for the taking.</p>

<p>If passive recon is looking at public information a client exposes to the world, then active recon is the opposite of that and actively looking for information about a client. Visiting their website(s) analyzing sitemaps, fingerprinting services, actively scanning network ranges owned by the client, visiting physical locations, interacting with employees in the building, or entering/leaving the building, asking probing questions about different aspects of business, calling various people or business units in the company in order to extract information about the client and so on and so forth. The idea here is that you are attempting to answer questions about the client, their employees, and their network that you cannot easily acquire answers to by finding direct (or in some cases, indirect) methods to ask them on your own.</p>

<p>Sometimes, you may choose to use tools and frameworks as a part of your recon investigations. <a href="https://github.com/ilektrojohn/creepy">There’s</a> a <a href="http://www.spiderfoot.net/">variety</a> of <a href="https://bitbucket.org/LaNMaSteR53/recon-ng">them</a> <a href="https://www.paterva.com/web7/">out</a> <a href="https://github.com/upgoingstar/datasploit">there</a><a href="https://glacial-sands-8880.herokuapp.com/">almost</a> all of which I have never used, but for the sake of completion, and because I know most of you are clamoring for toys to play with, I linked to a few that I’m aware off the top of my head. Always be mindful, that as a penetration tester and a network security professional, the tools do not make you a good penetration tester. It is your skill, your curiosity, and your capability to ask questions and draw conclusions that will win you the day and separates you from script kiddies. The recon phase requires you to be a good detective and draw as many conclusions as you can in a limited amount of time. The tools are just icing on the cake.</p>

<p>That’s all I’m gonna cover for now. The next chapter will be Initial Access. Until then, this has been an RS_101 lesson.</p>

<p>DA_667</p>

<h3 id="about-the-author">About the Author</h3>
<hr />

<p><img src="https://secure.gravatar.com/avatar/764a6c8a896ce101ee24b8dce76e58c1?s=170&amp;d=mm&amp;r=g" alt="" title="Tony Robinson" /></p>

<p>Tony Robinson (<a href="https://twitter.com/da_667">@da_667</a>) is a network security engineer. He is currently wrangled by hurricane labs. He had an affinity for network security monitoring, malware analysis, and threat intelligence. When not saving the internet, he can be found playing video games and savoring dank memes.</p>

    
  <hr>
  
  <a href="https://twitter.com/share"
     class="button btn-primary btn-sm"
     data-url="https://rallysecurity.com/2016/08/18/Pentesting-102.html"
     data-text="Pentesting Part 2">
    <i class="fab fa-twitter"></i> Tweet</a>
  

  

  <hr>
</section>

  

  
    <section id="6b4462a5">
  <div class="page-header">
  <h1>
    <a class='episode_title' href='https://rallysecurity.com/2016/08/03/Pentesting-101.html#6b4462a5'>Pentesting Part 1</a>
    <small class='episode_date'>
      
        2016-08-03 00:00:00 -0400
      
    </small> <br />
    <small></small>
  </h1>
</div>

</section>

  


          </div>
        </div>
        <div id="sidebar" class="col-sm-4">
          <div class="well">
            <div class="page-header">
  <h3>
    RallySecurityPodcast
    <br/><small>A security podcast about Nerds, News, & NSA gold</small>
  </h3>
</div>

<p class="text-center">
  <img height="200px" width="300px" src="https://rallysecurity.com/img/logo-360x360.png" alt="RallySecurityPodcast logo">
</p>

<p>RallySecurity is a weekly information security podcast that discusses news and breaches from both red and blue perspectives. We stream live on Twitch.</p>

  <script class="podlove-subscribe-button"
          src="/subscribe-button/javascripts/app.js"
          data-language="en"
          data-size="medium auto"
          data-style="filled"
          data-json-data="podcastData"
          data-colors="#EF3743;green;blue">
  </script>

  <script>
    window.podcastData = {
      "title": "RallySecurityPodcast",
      "subtitle": "A security podcast about Nerds, News, & NSA gold",
      "description": "RallySecurity is a weekly information security podcast that discusses news and breaches from both red and blue perspectives. We stream live on Twitch.",
      "cover": "https://rallysecurity.com/img/logo-360x360.png",
      "feeds": [
      
        {
          "type": "audio",
          "format": "mp3",
          "url": "https://rallysecurity.com/episodes.mp3.rss",
          "directory-url-itunes": "https://itunes.apple.com/bw/podcast/rally-security-podcast-hacking-cyber-infosec/id1144764113",
          "variant": "high"
        },
      
        {
          "type": "audio",
          "format": "m4a",
          "url": "https://rallysecurity.com/episodes.m4a.rss",
          "directory-url-itunes": "https://itunes.apple.com/bw/podcast/rally-security-podcast-hacking-cyber-infosec/id1144764113",
          "variant": "high"
        },
      
        {
          "type": "audio",
          "format": "ogg",
          "url": "https://rallysecurity.com/episodes.ogg.rss",
          "directory-url-itunes": "https://itunes.apple.com/bw/podcast/rally-security-podcast-hacking-cyber-infosec/id1144764113",
          "variant": "high"
        },
      
      ]
    }
  </script>
</p>

<hr/>

<div class="container">
<a href="https://www.twitch.tv/rallysecurity"><img src="https://www.rallysecurity.com/img/twitch-icon-240x240.png"style="width: 32px; height: 32px;"> Follow us on Twitch</a>
<br />
<a href="
https://www.twitch.tv/subs/rallysecurity"><img src="https://www.rallysecurity.com/img/twitch-icon-240x240.png"style="width: 32px; height: 32px;"> Subscribe on Twitch</a>
<br />
<a href="https://www.youtube.com/rallysecurity?sub_confirmation=1"><img src="https://www.rallysecurity.com/img/youtube-icon-32x32.png"style="width: 32px; height: 32px;"> Subscribe on Youtube</a>
<br />
<a class="twitter-follow-button" href="https://twitter.com/rallysecurity"><img src="https://www.rallysecurity.com/img/twitter-icon-32x32.png" style="width: 32px; height: 32px;"> Follow us on Twitter</a>
<br />
<a href="https://discord.gg/pfNgCgf"><img src="https://www.rallysecurity.com/img/discord-icon-240x240.png" style="width: 32px; height: 32px;"> Join our Discord Server</a>
</div>

<hr/>

<h4>RSS-Feeds</h4>

<ol type="i">
  
    <li><a href="https://rallysecurity.com/episodes.mp3.rss"><i class="fa fa-rss"></i> mp3-RSS-Feed</a></li>
  
    <li><a href="https://rallysecurity.com/episodes.m4a.rss"><i class="fa fa-rss"></i> m4a-RSS-Feed</a></li>
  
    <li><a href="https://rallysecurity.com/episodes.ogg.rss"><i class="fa fa-rss"></i> ogg-RSS-Feed</a></li>
  
</ol>

<h4>JSON-Feeds</h4>

<ol type="i">
  
    <li><a href="https://rallysecurity.com/feed.m4a.json"><i class="fa fa-rss-square"></i> m4a-JSON-Feed</a></li>
  
    <li><a href="https://rallysecurity.com/feed.mp3.json"><i class="fa fa-rss-square"></i> mp3-JSON-Feed</a></li>
  
    <li><a href="https://rallysecurity.com/feed.ogg.json"><i class="fa fa-rss-square"></i> ogg-JSON-Feed</a></li>
  
</ol>



<h4>Directories</h4>

<ol type="i">
  
    <li>in Apple-<a href="https://itunes.apple.com/bw/podcast/rally-security-podcast-hacking-cyber-infosec/id1144764113"><i class="fab fa-apple"></i> Itunes</a></li>
  
  
  
  
  
</ol>


<h4>License</h4>


  <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">
    
      <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" />
    
  </a>


<hr/>




          </div>
        </div>
      </div>
      <div class="row" id="footer">
        <small class="pull-right">
          Powered by <a href="https://jekyll-octopod.github.io/">jekyll-octopod</a>
          and <a href="http://jekyllrb.com/">Jekyll</a>.
        </small>
      </div>
    </div><!-- /.container -->
  </div><!-- /.container -->
</html>
